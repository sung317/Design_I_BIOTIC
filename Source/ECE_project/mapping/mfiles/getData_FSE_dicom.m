% getData.m
%
% Generates the .mat from the DICOM images. 
%
% written by J. Barral, M. Etezadi-Amoli, E. Gudmundson, and N. Stikov, 2009
%  (c) Board of Trustees, Leland Stanford Junior University    

clear all
close all

T1path = '../';

% Where to save the .mat 
savename = [T1path 'data/' 'MP2_FSE'];
%savename = [T1path 'data/' 'Aviv_SEIR'];

%img_path = '~/Desktop/Scans/7T IL Phantom 060713/';
%img_names = {'irfse_ti150.nii.gz','irfse_ti600.nii.gz',...
%             'irfse_ti1280.nii.gz','irfse_ti2000.nii.gz','irfse_ti4000.nii.gz'};
%img_path = '~/Desktop/Scans/7T IL Phantom 062413/';
%img_names = {'irfse_ti50.nii.gz','irfse_ti200.nii.gz',...
%             'irfse_ti600.nii.gz','irfse_ti1500.nii.gz','irfse_ti4000.nii.gz'};
% img_path = '~/Desktop/Scans/7T IL Phantom 070313/';
% img_names = {'IRFSE_TI50_14/IM-0005-0001.dcm','IRFSE_TI200_13/IM-0004-0001.dcm',...
%              'IRFSE_TI600_12/IM-0003-0001.dcm','IRFSE_TI1500_11/IM-0002-0001.dcm',...
%              'IRFSE_TI4000_10/IM-0001-0001.dcm'};
%img_path = '~/Desktop/Scans/7T MP3RAGE TT 071513/';
%img_names = {'IRFSE_TI200_12/IM-0009-0001.dcm',...
%             'IRFSE_TI600_11/IM-0008-0001.dcm','IRFSE_TI1500_10/IM-0007-0001.dcm',...
%             'IRFSE_TI4000_9/IM-0006-0001.dcm'};
%img_path = '~/Desktop/Scans/7T Matrix Phantoms 071913/';
%img_names = {'IRFSE_TI50_12/IM-0010-0001.dcm','IRFSE_TI200_11/IM-0009-0001.dcm',...
%             'IRFSE_TI600_10/IM-0008-0001.dcm','IRFSE_TI1500_9/IM-0007-0001.dcm',...
%             'IRFSE_TI4000_8/IM-0006-0001.dcm'};
%img_path = '~/Desktop/Scans/7T MP2RAGE 072313/';
%img_names = {'IRFSE_TI50_11/IM-0009-0001.dcm','IRFSE_TI200_10/IM-0008-0001.dcm',...
%             'IRFSE_TI600_9/IM-0007-0001.dcm','IRFSE_TI1500_8/IM-0006-0001.dcm',...
%             'IRFSE_TI4000_7/IM-0005-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MP2RAGE 072413/';
% img_names = {'IRFSE_TI50_12/IM-0010-0001.dcm','IRFSE_TI200_11/IM-0009-0001.dcm',...
%              'IRFSE_TI600_10/IM-0008-0001.dcm','IRFSE_TI1500_9/IM-0007-0001.dcm',...
%              'IRFSE_TI4000_8/IM-0006-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MP2RAGE 082513/';
% img_names = {'IRFSE_TI50_17/IM-0015-0001.dcm','IRFSE_TI200_16/IM-0014-0001.dcm',...
%              'IRFSE_TI600_15/IM-0013-0001.dcm','IRFSE_TI1500_14/IM-0012-0001.dcm',...
%              'IRFSE_TI4000_13/IM-0011-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MP2RAGE 082613/';
% img_names = {'IRFSE_TI50_9/IM-0007-0001.dcm','IRFSE_TI200_8/IM-0006-0001.dcm',...
%             'IRFSE_TI600_7/IM-0005-0001.dcm','IRFSE_TI1500_6/IM-0004-0001.dcm',...
%             'IRFSE_TI4000_5/IM-0003-0001.dcm'};
%img_path = '~/Desktop/Scans/7T MPnRAGE 090613/';
%img_names = {'IRFSE_TI50_11/IM-0008-0001.dcm','IRFSE_TI200_10/IM-0007-0001.dcm',...
%            'IRFSE_TI600_9/IM-0006-0001.dcm','IRFSE_TI1500_8/IM-0005-0001.dcm',...
%            'IRFSE_TI4000_7/IM-0004-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MPnRAGE 091813/';
% img_names = {'IRFSE_TI50_12/IM-0009-0001.dcm','IRFSE_TI200_11/IM-0008-0001.dcm',...
%             'IRFSE_TI600_10/IM-0007-0001.dcm','IRFSE_TI1500_9/IM-0006-0001.dcm',...
%             'IRFSE_TI4000_8/IM-0005-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MPnRAGE 092113/';
% img_names = {'IRFSE_TI50_11/IM-0009-0001.dcm','IRFSE_TI200_10/IM-0008-0001.dcm',...
%             'IRFSE_TI600_9/IM-0007-0001.dcm','IRFSE_TI1500_8/IM-0006-0001.dcm',...
%             'IRFSE_TI4000_7/IM-0005-0001.dcm'};
%img_path = '~/Desktop/Scans/7T Silent 092613/';
%img_names = {'Cor_Silent_1mm_TI=50_TD=4950_FA=2_BW=62_SS=256_12/IM-0009-0063.dcm',...
%             'Cor_Silent_1mm_TI=200_TD=4800_FA=2_BW=62_SS=256_11/IM-0008-0063.dcm',...
%             'Cor_Silent_1mm_TI=600_TD=4400_FA=2_BW=62_SS=256_6/IM-0003-0063.dcm',...
%             'Cor_Silent_1mm_TI=1500_TD=3000_FA=2_BW=62_SS=256_10/IM-0007-0063.dcm',...
%             'Cor_Silent_1mm_TI=4000_TD=1000_FA=2_BW=62_SS=256_9/IM-0006-0063.dcm'};
%img_path = '~/Desktop/Scans/7T MPnRAGE 100113/';
%img_names = {'IRFSE_TI50_13/IM-0010-0001.dcm','IRFSE_TI200_12/IM-0009-0001.dcm',...
%             'IRFSE_TI600_11/IM-0008-0001.dcm','IRFSE_TI1500_10/IM-0007-0001.dcm',...
%             'IRFSE_TI4000_9/IM-0006-0001.dcm'};
% img_path = '~/Desktop/Scans/7T IL2 Relax 100313/';
% img_names = {'IRFSE_TI50_9/IM-0006-0001.dcm','IRFSE_TI200_8/IM-0005-0001.dcm',...
%              'IRFSE_TI600_7/IM-0004-0001.dcm','IRFSE_TI1500_6/IM-0003-0001.dcm',...
%              'IRFSE_TI4000_5/IM-0002-0001.dcm'};
%img_path = '~/Desktop/Scans/Clark Mapping 100713/';
%img_names = {'T1w_IRFSE_18/IM-0018-0001.dcm','T1w_IRFSE_17/IM-0017-0001.dcm',...
%             'T1w_IRFSE_16/IM-0016-0001.dcm','T1w_IRFSE_15/IM-0015-0001.dcm',...
%             'T1w_IRFSE_14/IM-0014-0001.dcm'};
% img_path = '~/Desktop/Scans/3T1 MPnRAGE 101013/';
% img_names = {'IRFSE_TI_50_8/IM-0008-0001.dcm','IRFSE_TI_200_7/IM-0007-0001.dcm',...
%             'IRFSE_TI_600_6/IM-0006-0001.dcm','IRFSE_TI_1500_5/IM-0005-0001.dcm',...
%             'IRFSE_TI_4000_4/IM-0004-0001.dcm'};
% img_path = '~/Desktop/Scans/3T1 MPnRAGE 101713/';
% img_names = {'IRFSE_TI_50_12/IM-0012-0001.dcm','IRFSE_TI_200_11/IM-0011-0001.dcm',...
%             'IRFSE_TI_600_10/IM-0010-0001.dcm','IRFSE_TI_1500_9/IM-0009-0001.dcm',...
%             'IRFSE_TI_4000_8/IM-0008-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MPnRAGE 101913/';
% img_names = {'IRFSE_TI50_27/IM-0019-0001.dcm','IRFSE_TI200_24/IM-0018-0001.dcm',...
%             'IRFSE_TI600_23/IM-0017-0001.dcm','IRFSE_TI1500_22/IM-0016-0001.dcm',...
%             'IRFSE_TI4000_21/IM-0015-0001.dcm'};
%img_path = '~/Desktop/Scans/7T MPnRAGE SL 102413/';
%img_names = {'IRFSE_TI200_13/IM-0010-0001.dcm',...  %'IRFSE_TI50_14/IM-0011-0001.dcm',
%            'IRFSE_TI600_12/IM-0009-0001.dcm','IRFSE_TI1500_11/IM-0008-0001.dcm',...
%            'IRFSE_TI4000_10/IM-0007-0001.dcm'};
%img_path = '~/Desktop/Scans/7T MPnRAGE PP 110113/';
%img_names = {'IRFSE_TI200_11/IM-0009-0001.dcm',...  %'IRFSE_TI50_12/IM-0010-0001.dcm',
%            'IRFSE_TI600_10/IM-0008-0001.dcm','IRFSE_TI1500_9/IM-0007-0001.dcm',...
%            'IRFSE_TI4000_8/IM-0006-0001.dcm'};
%img_path = '~/Desktop/Scans/7T MPRAGE 111113/';
%img_names = {'IRFSE_TI50_10/IM-0008-0001.dcm','IRFSE_TI200_9/IM-0007-0001.dcm',...
%            'IRFSE_TI600_8/IM-0006-0001.dcm','IRFSE_TI1500_7/IM-0005-0001.dcm',...
%            'IRFSE_TI4000_6/IM-0004-0001.dcm'};
% img_path = '~/Desktop/Scans/7T MPnRAGE SM 111213/';
% img_names = {'IRFSE_TI50_13/IM-0011-0001.dcm','IRFSE_TI200_12/IM-0010-0001.dcm',...
%             'IRFSE_TI600_11/IM-0009-0001.dcm','IRFSE_TI1500_10/IM-0008-0001.dcm',...
%             'IRFSE_TI4000_9/IM-0007-0001.dcm'};
% img_path = '~/Desktop/Scans/Clark Gd Compound 112113/';
% img_names = {'IR_FSE_T1_map_13/IM-0013-0001.dcm','IR_FSE_T1_map_13/IM-0013-0002.dcm',...
%              'IR_FSE_T1_map_13/IM-0013-0003.dcm','IR_FSE_T1_map_13/IM-0013-0004.dcm',...
%              'IR_FSE_T1_map_13/IM-0013-0005.dcm','IR_FSE_T1_map_13/IM-0013-0006.dcm',...
%              'IR_FSE_T1_map_13/IM-0013-0007.dcm','IR_FSE_T1_map_13/IM-0013-0008.dcm'};
% img_path = '~/Desktop/Scans/7T IE Testing AS 112913/IRFSE_TI4000_productHS_a_gzrf0=0_12/';
% img_names = {'IM-0010-0001.dcm','IM-0010-0002.dcm',...
%              'IM-0010-0003.dcm','IM-0010-0004.dcm',...
%              'IM-0010-0005.dcm','IM-0010-0006.dcm',...
%              'IM-0010-0007.dcm','IM-0010-0008.dcm'};
% img_path = '~/Desktop/Scans/7T IE Testing JR 122013/IRFSE_T1map_series_1mm_TR6_4/';
% img_names = {'IM-0002-0001.dcm','IM-0002-0002.dcm',...
%              'IM-0002-0003.dcm','IM-0002-0004.dcm',...
%              'IM-0002-0005.dcm','IM-0002-0006.dcm',...
%              'IM-0002-0007.dcm','IM-0002-0008.dcm',...
%              'IM-0002-0009.dcm','IM-0002-0010.dcm',...
%              'IM-0002-0011.dcm','IM-0002-0012.dcm'};
% img_path = '~/Desktop/Scans/7T IRFSE Testing DY 021114/IRFSE_T1map_series_15mm_TR6_7/';
% img_names = {'IM-0005-0001.dcm','IM-0005-0002.dcm',...
%              'IM-0005-0003.dcm','IM-0005-0004.dcm',...
%              'IM-0005-0005.dcm','IM-0005-0006.dcm',...
%              'IM-0005-0007.dcm','IM-0005-0008.dcm',...
%              'IM-0005-0009.dcm','IM-0005-0010.dcm',...
%              'IM-0005-0011.dcm','IM-0005-0012.dcm',...
%              'IM-0005-0013.dcm'};
% img_path = '~/Desktop/Scans/7T IRFSE Testing KB 041114/';
% img_names = {'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0001.dcm','IRFSE_T1map_series_15mm_TR6_8/IM-0006-0001.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0002.dcm','IRFSE_T1map_series_15mm_TR6_8/IM-0006-0002.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0003.dcm','IRFSE_T1map_series_15mm_TR6_8/IM-0006-0003.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0004.dcm','IRFSE_T1map_series_15mm_TR6_8/IM-0006-0004.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0005.dcm','IRFSE_T1map_series_15mm_TR6_8/IM-0006-0005.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0006.dcm','IRFSE_T1map_series_15mm_TR6_8/IM-0006-0006.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_7/IM-0005-0007.dcm'};
%img_path = '~/Desktop/Scans/3T2 MPnRAGE Test 042314/IRFSE_192x192_1mm_TR=6000_7/';
%img_names = {'IM-0004-0001.dcm','IM-0004-0002.dcm','IM-0004-0003.dcm','IM-0004-0004.dcm'};
%img_path = '~/Desktop/Scans/3T2 MPnRAGE Test 050914/IRFSE_192x192_1mm_TR=6000_7/';
%img_names = {'IM-0006-0001.dcm','IM-0006-0002.dcm','IM-0006-0003.dcm','IM-0006-0004.dcm'};
%img_path = '~/Desktop/Scans/7T MPnRAGE 052114/IRFSE_T1map_series_5/';
%img_names = {'IM-0004-0001.dcm','IM-0004-0002.dcm','IM-0004-0003.dcm','IM-0004-0004.dcm'};
% img_path = '~/Desktop/Scans/7T MPnRAGE 070314/';
% img_names = {'IRFSE_TI50_14/IM-0012-0001.dcm','IRFSE_TI200_13/IM-0011-0001.dcm',...
%            'IRFSE_TI600_12/IM-0010-0001.dcm','IRFSE_TI1500_11/IM-0009-0001.dcm',...
%            'IRFSE_TI4000_10/IM-0008-0001.dcm'};
% img_path = '~/Desktop/Scans/3T3 IRFSE MP2RAGE KB 071114/';
% img_names = {'IRFSE_T1map_series_4/IM-0002-0001.dcm','IRFSE_T1map_series_5/IM-0003-0001.dcm',...
%              'IRFSE_T1map_series_4/IM-0002-0002.dcm','IRFSE_T1map_series_5/IM-0003-0002.dcm',...
%              'IRFSE_T1map_series_4/IM-0002-0003.dcm','IRFSE_T1map_series_5/IM-0003-0003.dcm',...
%              'IRFSE_T1map_series_4/IM-0002-0004.dcm','IRFSE_T1map_series_5/IM-0003-0004.dcm',...
%              'IRFSE_T1map_series_4/IM-0002-0005.dcm','IRFSE_T1map_series_5/IM-0003-0005.dcm',...
%              'IRFSE_T1map_series_4/IM-0002-0006.dcm','IRFSE_T1map_series_5/IM-0003-0006.dcm',...
%              'IRFSE_T1map_series_4/IM-0002-0007.dcm'};
% img_path = '~/Desktop/Scans/7T MP3RAGE 072314/';
% img_names = {'IRFSE_T1map_series_1mm_TR6_7/IM-0005-0001.dcm','IRFSE_T1map_series_1mm_TR6_7/IM-0005-0002.dcm',...
%            'IRFSE_T1map_series_1mm_TR6_7/IM-0005-0003.dcm','IRFSE_T1map_series_1mm_TR6_7/IM-0005-0004.dcm'};
% img_path = '~/Desktop/Scans/7T MP3RAGE MM 072814/IRFSE_T1map_series_15mm_TR6_6/';
% img_names = {'IM-0004-0001.dcm','IM-0004-0002.dcm',...
%              'IM-0004-0003.dcm','IM-0004-0004.dcm',...
%              'IM-0004-0005.dcm','IM-0004-0006.dcm',...
%              'IM-0004-0007.dcm','IM-0004-0008.dcm',...
%              'IM-0004-0009.dcm','IM-0004-0010.dcm',...
%              'IM-0004-0011.dcm','IM-0004-0012.dcm',...
%              'IM-0004-0013.dcm'};
% img_path = '~/Desktop/Scans/7T IRFSE 3TI BS 080614/';
% img_names = {'IRFSE_T1map_series_15mm_TR6_8/IM-0006-0001.dcm','IRFSE_T1map_series_15mm_TR6_10/IM-0008-0001.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_9/IM-0007-0001.dcm','IRFSE_T1map_series_15mm_TR6_10/IM-0008-0002.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_9/IM-0007-0002.dcm','IRFSE_T1map_series_15mm_TR6_10/IM-0008-0003.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_9/IM-0007-0003.dcm','IRFSE_T1map_series_15mm_TR6_10/IM-0008-0004.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_9/IM-0007-0004.dcm','IRFSE_T1map_series_15mm_TR6_10/IM-0008-0005.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_9/IM-0007-0005.dcm','IRFSE_T1map_series_15mm_TR6_10/IM-0008-0006.dcm',...
%              'IRFSE_T1map_series_15mm_TR6_9/IM-0007-0006.dcm'};
% img_path = '~/Desktop/Scans/3T3 IRFSE 3TI KW 080814/';
% img_names = {'IRFSE_T1map_series_6/IM-0004-0001.dcm','IRFSE_T1map_series_7/IM-0005-0001.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0002.dcm','IRFSE_T1map_series_7/IM-0005-0002.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0003.dcm','IRFSE_T1map_series_7/IM-0005-0003.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0004.dcm','IRFSE_T1map_series_7/IM-0005-0004.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0005.dcm','IRFSE_T1map_series_7/IM-0005-0005.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0006.dcm','IRFSE_T1map_series_7/IM-0005-0006.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0007.dcm'};
%img_path = '~/Desktop/Scans/7T MPRAGE T1series 081214/';
%img_names = {'recon_P44032.7/Sec_014.mag','recon_P45056.7/Sec_014.mag','recon_P46080.7/Sec_014.mag',...
%             'recon_P47104.7/Sec_014.mag','recon_P48128.7/Sec_014.mag','recon_P49152.7/Sec_014.mag',...
%             'recon_P50176.7/Sec_014.mag','recon_P51200.7/Sec_014.mag','recon_P52224.7/Sec_014.mag',...
%             'recon_P53248.7/Sec_014.mag','recon_P54272.7/Sec_014.mag','recon_P55296.7/Sec_014.mag'};
%img_path = '~/Desktop/Scans/7T MPRAGE T1series 081214/MPRAGE_T1map_series_3/';
%img_names = {'IM-0002-0014.dcm','IM-0002-0042.dcm','IM-0002-0070.dcm','IM-0002-0098.dcm','IM-0002-0126.dcm','IM-0002-0154.dcm',...
%             'IM-0002-0182.dcm','IM-0002-0210.dcm','IM-0002-0238.dcm','IM-0002-0266.dcm','IM-0002-0294.dcm','IM-0002-0322.dcm'};
% img_path = '~/Desktop/Scans/7T IRFSE 3TI MaP 081314/';
% img_names = {'MPRAGE_T1map_series_4/IM-0002-0015.dcm','MPRAGE_T1map_series_5/IM-0003-0015.dcm','MPRAGE_T1map_series_6/IM-0004-0015.dcm',...
%              'MPRAGE_T1map_series_4/IM-0002-0043.dcm','MPRAGE_T1map_series_5/IM-0003-0043.dcm','MPRAGE_T1map_series_6/IM-0004-0043.dcm',...
%              'MPRAGE_T1map_series_4/IM-0002-0071.dcm','MPRAGE_T1map_series_5/IM-0003-0071.dcm','MPRAGE_T1map_series_6/IM-0004-0071.dcm',...
%              'MPRAGE_T1map_series_4/IM-0002-0099.dcm','MPRAGE_T1map_series_5/IM-0003-0099.dcm','MPRAGE_T1map_series_6/IM-0004-0099.dcm'};
%img_path = '~/Desktop/Scans/7T IRFSE 3TI MaP 081314/';
%img_names = {'IRFSE_T1map_series_7/IM-0005-0001.dcm','IRFSE_T1map_series_8/IM-0006-0001.dcm','IRFSE_T1map_series_9/IM-0007-0001.dcm',...
%             'IRFSE_T1map_series_7/IM-0005-0002.dcm','IRFSE_T1map_series_8/IM-0006-0002.dcm','IRFSE_T1map_series_9/IM-0007-0002.dcm',...
%             'IRFSE_T1map_series_7/IM-0005-0003.dcm','IRFSE_T1map_series_8/IM-0006-0003.dcm','IRFSE_T1map_series_9/IM-0007-0003.dcm',...
%             'IRFSE_T1map_series_7/IM-0005-0004.dcm','IRFSE_T1map_series_8/IM-0006-0004.dcm','IRFSE_T1map_series_9/IM-0007-0004.dcm'};
%img_path = '~/Desktop/Scans/7T IRFSE 3TI JS 082614/IRFSE_T1map_series_15mm_hsn1_6/';
%img_names = {'IM-0004-0002.dcm','IM-0004-0003.dcm','IM-0004-0004.dcm','IM-0004-0005.dcm','IM-0004-0006.dcm','IM-0004-0007.dcm'};
%img_path = '~/Desktop/Scans/7T MPRAGE Temp Test 090214/IRFSE_T1map_series_15mm_hsn0_8/';
%img_names = {'IM-0007-0001.dcm','IM-0007-0002.dcm','IM-0007-0003.dcm','IM-0007-0004.dcm','IM-0007-0005.dcm'};

% img_path = '~/Desktop/Scans/3T3 IRFSE 3TI BS 091614/';
% img_names = {'IRFSE_T1map_series_7/IM-0005-0001.dcm','IRFSE_T1map_series_8/IM-0006-0001.dcm',...
%              'IRFSE_T1map_series_8/IM-0006-0002.dcm','IRFSE_T1map_series_7/IM-0005-0002.dcm',...
%              'IRFSE_T1map_series_8/IM-0006-0003.dcm','IRFSE_T1map_series_7/IM-0005-0003.dcm',...
%              'IRFSE_T1map_series_8/IM-0006-0004.dcm','IRFSE_T1map_series_7/IM-0005-0004.dcm',...
%              'IRFSE_T1map_series_8/IM-0006-0005.dcm','IRFSE_T1map_series_7/IM-0005-0005.dcm',...
%              'IRFSE_T1map_series_8/IM-0006-0006.dcm','IRFSE_T1map_series_7/IM-0005-0006.dcm'};
% img_path = '~/Desktop/Scans/3T3 IRFSE 3TI MM 091614/';
% img_names = {'IRFSE_T1map_series_6/IM-0004-0001.dcm','IRFSE_T1map_series_7/IM-0005-0001.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0002.dcm','IRFSE_T1map_series_7/IM-0005-0002.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0003.dcm','IRFSE_T1map_series_7/IM-0005-0003.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0004.dcm','IRFSE_T1map_series_7/IM-0005-0004.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0005.dcm','IRFSE_T1map_series_7/IM-0005-0005.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0006.dcm','IRFSE_T1map_series_7/IM-0005-0006.dcm',...
%              'IRFSE_T1map_series_6/IM-0004-0007.dcm'};

% img_path = '~/Desktop/Bragi_test/SSFSEIR_17/';
% img_names = {'IM-0001-0001.dcm','IM-0001-0002.dcm','IM-0001-0003.dcm','IM-0001-0004.dcm','IM-0001-0005.dcm','IM-0001-0006.dcm',...
%              'IM-0001-0007.dcm','IM-0001-0008.dcm','IM-0001-0009.dcm','IM-0001-0010.dcm','IM-0001-0011.dcm','IM-0001-0012.dcm',...
%              'IM-0001-0013.dcm','IM-0001-0014.dcm','IM-0001-0015.dcm','IM-0001-0016.dcm','IM-0001-0017.dcm','IM-0001-0018.dcm',...
%              'IM-0001-0019.dcm','IM-0001-0020.dcm'};

%img_path = '~/Desktop/mrQ-master/RAWDATA/20111020_1294/dicoms/';
%img_names = {'0008_01_IR_EPI_TI50_TR3s_dicoms/AN_MR.1.2.840.113619.2.283.4120.7575399.14756.1319132101.441.dcm',...
%             '0007_01_IR_EPI_TI400_TR3s_dicoms/AN_MR.1.2.840.113619.2.283.4120.7575399.14756.1319132101.284.dcm',...
%             '0006_01_IR_EPI_TI1200_TR3s_dicoms/AN_MR.1.2.840.113619.2.283.4120.7575399.14756.1319132101.127.dcm',...
%             '0005_01_IR_EPI_TI2400_TR3s_dicoms/AN_MR.1.2.840.113619.2.283.4120.7575399.14756.1319132100.970.dcm'};

img_path = '../../Scans/7T MPnRAGE SM 111213/';
img_names = {'IRFSE_TI200_12/IM-0010-0001.dcm',...
            'IRFSE_TI600_11/IM-0009-0001.dcm','IRFSE_TI1500_10/IM-0008-0001.dcm',...
            'IRFSE_TI4000_9/IM-0007-0001.dcm'};

dims = [256,256,1,4];
%dims = [128,128,1,4];
img_all = zeros(dims);

extra.tVec = zeros(dims(4),1);

for n=1:dims(4)
  %nii = load_nii([img_path,img_names{n}]);
  %img_all(:,:,1,n) = double(flipdim(squeeze(nii.img),1));
  dcm = dicomread([img_path,img_names{n}]);
  hdr = dicominfo([img_path,img_names{n}]);
  %dcm2 = dicomread([img_path,img_names{n+12}]);
  %hdr2 = dicominfo([img_path,img_names{n+12}]);
  img_all(:,:,1,n) = double(rot90(dcm,3));
  %img_all(:,:,1,n) = -complex(double(rot90(dcm,3)),double(rot90(dcm2,3)));
  extra.tVec(n) = hdr.InversionTime;
end

%for n=1:dims(4)
%  img_all(:,:,1,n) = img_all(:,:,1,n) .* exp(-1j .* angle(img_all(:,:,1,end)));
%end

range = [7,8,9,10,11,12,13];
%range = [6,7,8,9,10,11,12];
data = img_all;
%data = data(:,:,range);
%extra.tVec = [50 200 600 1500 4000];
%extra.tVec = [50 100 150 200 400 700 1000 1500 2000 2500 3000 4000];
%extra.tVec = extra.tVec(range);
extra.T1Vec = 1:5000; % this range can be reduced if a priori information is available

save(savename,'data','extra')
